<div class="container-fluid">
  <div class="table-responsive">
    <div class="table-wrapper">
      <div class="table-title">
        <div class="row mt-4">
          <div class="col-sm-6">
            <h2>จัดการข้อมูลผู้ใช้งาน</h2>
          </div>
          <div class="col-sm-4"></div>
          <div class="col-sm-2">
            <a href="#addEmployeeModal" class="btn btn-success" data-bs-toggle="modal">
              <i class="fas fa-plus pr-2"></i> <span> เพิ่มข้อมูล</span></a>
          </div>
        </div>
      </div>
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>รูปภาพ</th>
            <th>ชื่อสกุล</th>
            <th>ที่อยู่</th>
            <th>โทรศัพท์</th>
            <th>การทำงาน</th>
          </tr>
        </thead>
        <tbody>
          <tr>
          <tr *ngFor="let item of data">
            <td>
              <img src="http://localhost/borrowsystem_api/images/users/{{item.picture}}" alt="" *ngIf="item.picture!=''"
                width="100px" height="100px">
              <img src="assets/images/noperson.jfif" alt="" *ngIf="item.picture==''">
            </td>
            <td>{{item.name}}</td>
            <td>{{item.address}}</td>
            <td>{{item.telephone}}</td>
            <td>
              <a href="#deleteEmployeeModal" class="delete text-danger" data-bs-toggle="modal"><i class="fas fa-trash"
                  data-bs-toggle="tooltip" title="Delete" (click)="onDelete(item)">&#xE872;</i></a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<!-- Add Modal HTML -->
<div id="addEmployeeModal" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <form (ngSubmit)="onSave()" [noValidate]="false">
        <div class="modal-header">
          <h4 class="modal-title">เพิ่มข้อมูลผู้ใช้งาน</h4>
          <button type="button" class="close" data-bs-dismiss="modal" aria-hidden="true">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>ชื่อสกุล</label>
            <input type="text" class="form-control" required name="name" [(ngModel)]="model.name" />
          </div>
          <div class="form-group">
            <label>ที่อยู่</label>
            <textarea class="form-control" required name="address" [(ngModel)]="model.address"></textarea>
          </div>
          <div class="form-group">
            <label>โทรศัพท์</label>
            <input type="text" class="form-control" required name="telephone" [(ngModel)]="model.telephone" />
          </div>
          <div class="form-group">
            <label>ชื่อผู้ใช้งาน</label>
            <input type="text" class="form-control" required name="username" [(ngModel)]="model.username" />
          </div>
          <div class="form-group">
            <label>รหัสผ่าน</label>
            <input type="text" class="form-control" required name="password" [(ngModel)]="model.password" />
          </div>
          <div class="form-group">
            <label>รูปภาพ</label>
            <input type="file" class="form-control" (change)="onSelectFile($event)"/>
          </div>
        </div>
        <div class="modal-footer">
          <input type="button" class="btn btn-default" data-bs-dismiss="modal" value="Cancel" />
          <input type="submit" class="btn btn-success" value="Add" />
        </div>
      </form>
    </div>
  </div>
</div>
<!-- Edit Modal HTML -->
<div id="editEmployeeModal" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <form (ngSubmit)="onEditEmployee">
        <div class="modal-header">
          <h4 class="modal-title">แก้ไขข้อมูลผู้ใช้งาน</h4>
          <button type="button" class="close" data-bs-dismiss="modal" aria-hidden="true">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>ชื่อสกุล</label>
            <input type="text" class="form-control" required name="name" [(ngModel)]="model.name" />
          </div>
          <div class="form-group">
            <label>ที่อยู่</label>
            <textarea class="form-control" required name="address" [(ngModel)]="model.address"></textarea>
          </div>
          <div class="form-group">
            <label>โทรศัพท์</label>
            <input type="text" class="form-control" required name="telephone" [(ngModel)]="model.telephone" />
          </div>
          <div class="form-group">
            <label>ชื่อผู้ใช้งาน</label>
            <input type="text" class="form-control" required name="username" [(ngModel)]="model.username" />
          </div>
          <div class="form-group">
            <label>รหัสผ่าน</label>
            <input type="text" class="form-control" required name="password" [(ngModel)]="model.password" />
          </div>
        </div>
        <div class="modal-footer">
          <input type="button" class="btn btn-default" data-bs-dismiss="modal" value="Cancel" />
          <input type="submit" class="btn btn-info" value="Save" />
        </div>
      </form>
    </div>
  </div>
</div>
<!-- Delete Modal HTML -->
<div id="deleteEmployeeModal" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <form (ngSubmit)="onDeleteEmployee()">
        <div class="modal-header">
          <h4 class="modal-title">ลบข้อมูลผู้ใช้งาน</h4>
          <button type="button" class="close" data-bs-dismiss="modal" aria-hidden="true">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <p>ต้องการลบข้อมูลรายการนี้ <span class="text-danger">รหัส {{model.userid}}{{model.name}}</span> ใช่หรือไม่ ?</p>
          <p class="text-warning">
            <small>This action cannot be undone.</small>
          </p>
        </div>
        <div class="modal-footer">
          <input type="button" class="btn btn-default" data-bs-dismiss="modal" value="Cancel" />
          <input type="submit" class="btn btn-danger" value="Delete" />
        </div>
      </form>
    </div>
  </div>
</div>